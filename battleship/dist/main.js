(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}const n=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=e,this.hits=0},(r=[{key:"hit",value:function(){this.hits++}},{key:"isSunk",value:function(){return this.hits>=this.length}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}const c=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ships=[],this.missedAttacks=[],this.board=Array(10).fill(null).map((function(){return Array(10).fill(null)}))},(e=[{key:"placeShip",value:function(t,e,r,o){var a=new n(t);if(this.canPlaceShip(t,e,r,o)){for(var i=0;i<t;i++)o?this.board[e][r+i]=a:this.board[e+i][r]=a;return this.ships.push(a),!0}return!1}},{key:"canPlaceShip",value:function(t,e,r,n){if(n){if(r+t>10)return!1;for(var o=0;o<t;o++)if(null!==this.board[e][r+o])return!1}else{if(e+t>10)return!1;for(var a=0;a<t;a++)if(null!==this.board[e+a][r])return!1}return!0}},{key:"receiveAttack",value:function(t,e){return this.board[t][e]instanceof n?(this.board[t][e].hit(),!0):(this.missedAttacks.push({x:t,y:e}),!1)}},{key:"allShipsSunk",value:function(){return this.ships.every((function(t){return t.isSunk()}))}}])&&a(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}const f=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameboard=new c,this.isComputer=e,this.attackedCoordinates=new Set},(e=[{key:"attack",value:function(t,e,r){if(this.isComputer){var n=this.getRandomCoordinates();e=n.x,r=n.y}var o="".concat(e,",").concat(r);return!this.attackedCoordinates.has(o)&&(this.attackedCoordinates.add(o),t.receiveAttack(e,r))}},{key:"getRandomCoordinates",value:function(){var t,e;do{t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random())}while(this.attackedCoordinates.has("".concat(t,",").concat(e)));return{x:t,y:e}}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t,e){var r=document.getElementById("player-board"),n=document.getElementById("computer-board");d(r,t,!1),d(n,e,!0)}function d(t,e,r){t.innerHTML="";for(var n=function(n){for(var o=function(o){var a=document.createElement("div");a.classList.add("cell"),a.dataset.x=o,a.dataset.y=n,!r&&e.board[o][n]&&a.classList.add("ship"),e.missedAttacks.some((function(t){return t.x===o&&t.y===n}))&&a.classList.add("missed"),e.board[o][n]&&e.board[o][n].hits>0&&a.classList.add("hit"),t.appendChild(a)},a=0;a<10;a++)o(a)},o=0;o<10;o++)n(o)}var m=new f,b=new f(!0);m.gameboard.placeShip(5,0,0,!1),m.gameboard.placeShip(4,2,2,!0),m.gameboard.placeShip(3,5,5,!1),m.gameboard.placeShip(3,7,7,!0),m.gameboard.placeShip(2,9,9,!1),b.gameboard.placeShip(5,0,0,!1),b.gameboard.placeShip(4,2,2,!0),b.gameboard.placeShip(3,5,5,!1),b.gameboard.placeShip(3,7,7,!0),b.gameboard.placeShip(2,9,9,!1),p(m.gameboard,b.gameboard),function(t,e){document.getElementById("computer-board").addEventListener("click",(function(r){if(r.target.classList.contains("cell")&&!r.target.classList.contains("hit")&&!r.target.classList.contains("missed")){var n=parseInt(r.target.dataset.x),o=parseInt(r.target.dataset.y);if(t.attack(e.gameboard,n,o),p(t.gameboard,e.gameboard),e.gameboard.allShipsSunk())return void alert("You win!");e.attack(t.gameboard),p(t.gameboard,e.gameboard),t.gameboard.allShipsSunk()&&alert("Computer wins!")}}))}(m,b)})();